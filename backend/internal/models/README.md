# Models Package Documentation

Этот пакет содержит все модели данных для приложения "Одной крови".

## Структура типов

### Основные типы (types.go)

Файл `types.go` содержит все общие типы и константы, используемые в различных моделях:

#### PetType
Тип животного в системе:
- `dog` - собака
- `cat` - кошка

#### Gender
Пол животного:
- `male` - самец
- `female` - самка

#### LivingCondition
Условия проживания животного:
- `apartment` - квартира
- `house` - дом
- `aviary` - вольер
- `other` - другое

#### UserRole
Роль пользователя в системе:
- `user` - обычный пользователь
- `clinic` - клиника
- `admin` - администратор
- `donor` - донор

#### BloodSearchStatus
Статус поиска донора крови:
- `active` - активный поиск
- `completed` - поиск завершен
- `cancelled` - поиск отменен
- `expired` - поиск истек

#### BloodStockStatus
Статус запаса крови:
- `active` - активный запас
- `reserved` - зарезервирован
- `used` - использован
- `expired` - истек срок годности

#### DonationStatus
Статус донорства:
- `scheduled` - запланировано
- `completed` - завершено
- `cancelled` - отменено
- `no_show` - донор не явился

#### DonorRequirements
Структура требований к донорам крови:
```go
type DonorRequirements struct {
    MinWeight *float64 // Минимальный вес в кг
    MaxWeight *float64 // Максимальный вес в кг
    AgeMin    *int     // Минимальный возраст в годах
    AgeMax    *int     // Максимальный возраст в годах
    Gender    *string  // Пол (male/female/any)
    Breeds    []string // Допустимые породы
}
```

## Модели

### User (user.go)
Модель пользователя системы. Содержит базовую информацию о пользователе, включая Telegram ID, контактные данные и роль.

### Pet (pet.go)
Модель питомца. Содержит полную информацию о животном, включая медицинские данные, местоположение и характеристики.

### VetClinic (vet_clinic.go)
Модель ветеринарной клиники. Содержит информацию о клинике, условиях переливания, бонусных программах и требованиях к донорам.

### BloodSearch (blood_searches.go)
Модель запроса на поиск донора крови. Связывает питомца, местоположение и тип крови.

### BloodStock (blood_stocks.go)
Модель запаса крови в клинике. Содержит информацию об объеме, цене, сроке годности и статусе.

### Donation (donations.go)
Модель донорства крови. Связывает донора-питомца с клиникой и содержит дату и статус донорства.

### BloodType (blood_types.go)
Модель типа крови. Содержит название типа крови (например, "DEA 1.1", "A", "B", "AB").

### Breed (breeds.go)
Модель породы животного. Связана с типом животного (собака/кошка).

### Location (locations.go)
Модель локации/города в системе.

## Использование типизированных полей

Все enum-поля теперь типизированы, что обеспечивает:
1. **Безопасность типов** - компилятор проверяет корректность значений
2. **Автодополнение** - IDE подсказывает доступные значения
3. **Документированность** - все возможные значения явно определены в коде

### Пример использования:

```go
// Создание нового питомца
pet := models.Pet{
    Name:   "Бобик",
    Type:   models.PetTypeDog,
    Gender: models.GenderMale,
    LivingCondition: models.LivingConditionApartment,
}

// Создание поиска донора
search := models.BloodSearch{
    PetID:  &petID,
    Status: models.BloodSearchStatusActive,
}

// Создание пользователя
user := models.User{
    TelegramID: 123456789,
    Role:       models.UserRoleUser,
}
```

## GORM теги

Все модели используют GORM теги для маппинга на базу данных:
- `gorm:"primaryKey"` - первичный ключ
- `gorm:"not null"` - обязательное поле
- `gorm:"size:N"` - максимальная длина строки
- `gorm:"type:jsonb;serializer:json"` - JSONB поле с JSON сериализацией
- `gorm:"index"` - создание индекса

## JSON теги

Все поля содержат JSON теги для правильной сериализации:
- `json:"field_name"` - имя поля в JSON
- `json:"field_name,omitempty"` - поле опускается если пустое
- `example:"value"` - пример значения для Swagger документации